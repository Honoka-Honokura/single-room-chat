/* ================================
   å…¨ä½“ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå…±é€š
================================ */

/* ç”»é¢å…¨ä½“ã‚’ä½¿ã†ãŸã‚ã®åŸºæœ¬è¨­å®š */
html, body {
    height: 100%;
    margin: 0;
    padding: 0;
}

/* å…¨ä½“ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ ------------------------ */
body {
    font-family:
        "Hiragino Sans",
        "Hiragino Kaku Gothic ProN",
        "Hiragino Kaku Gothic Pro",
        "Noto Sans JP",
        sans-serif;
    margin: 0;
    display: flex;
    height: 100dvh;
    background: #f3f4f6;
}

/* å·¦ï¼šãƒãƒ£ãƒƒãƒˆã‚¨ãƒªã‚¢ / å³ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ */
.chat-wrapper {
    flex: 1;
    display: flex;
    flex-direction: column;
    border-right: 1px solid #ddd;
    min-width: 0;
    min-height: 0;
}

.sidebar {
    width: 220px;
    padding: 8px;
    box-sizing: border-box;
    overflow-y: auto;
}

.sidebar h3 {
    margin-top: 0;
    font-size: 14px;
}

#userList {
    font-size: 13px;
    line-height: 1.6;
}

/* ãƒ˜ãƒƒãƒ€ãƒ¼ ------------------------------ */
header {
    padding: 8px 12px;
    border-bottom: 1px solid #ddd;
    font-size: 14px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.header-right {
    display: flex;
    align-items: center;
    gap: 8px;
}

#roomTitle {
    font-weight: bold;
}

#statusText {
    font-size: 12px;
    color: #555;
}

/* å…¥å®¤å‰ã®ãŠçŸ¥ã‚‰ã›ã‚¨ãƒªã‚¢ */
#chatInfoBeforeJoin {
    padding: 8px 12px;
    font-size: 13px;
    color: #666;
    border-bottom: 1px solid #ddd;
}

/* ================================
   ãƒãƒ£ãƒƒãƒˆãƒ­ã‚°
================================ */

#chatLog {
    flex: 1;                 /* ãƒ˜ãƒƒãƒ€ãƒ¼ã¨ãƒ•ãƒƒã‚¿ãƒ¼ä»¥å¤–ã‚’å…¨éƒ¨ä½¿ã† */
    padding: 8px 12px;
    overflow-y: auto;
    font-size: 14px;
    background: #fafafa;
    display: none;           /* å…¥å®¤å‰ã¯éè¡¨ç¤º */
}

.system-message {
    color: #777;
    font-size: 12px;
    margin: 4px 0;
}

.message-row {
    display: flex;
    flex-direction: column;
}

.message-row.self {
    align-items: flex-end;
}

.message {
    margin: 4px 0;
    padding: 6px 8px;
    border-radius: 12px;
    display: inline-block;
    max-width: 80%;
    word-break: break-word;
    position: relative; /* ã—ã£ã½ã®åŸºæº– */
    box-shadow: 0 1px 3px rgba(0,0,0,0.12);
}

.message-meta {
    font-size: 11px;
    color: #666;
    margin-bottom: 2px;
}

.message-self {
    background: #e0f3ff;
    align-self: flex-end;
}

.message-other {
    background: #ffffff;
}

/* å¹ãå‡ºã—ã®ã—ã£ã½ ---------------------- */
.message::after {
    content: "";
    position: absolute;
    width: 10px;
    height: 10px;
    background: var(--bubble-color, #ffffff);
    transform: rotate(45deg);
}

.message-row.other .message::after {
    bottom: -4px;
    left: 14px;
}

.message-row.self .message::after {
    bottom: -4px;
    right: 14px;
}


/* ãŠé¡Œãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ ----------------------------------- */
.topic-message {
    margin: 8px 0;
    padding: 8px 10px;
    border-radius: 10px;
    background: linear-gradient(135deg, #fef2f2, #fff7ed);
    border: 1px solid #fecaca;
    box-shadow: 0 2px 4px rgba(0,0,0,0.08);
    white-space: pre-wrap;
    word-break: break-word;
}

/* ä¸Šéƒ¨ã®ãƒ˜ãƒƒãƒ€ãƒ¼è¡Œï¼ˆãƒ©ãƒ™ãƒ«ï¼‹ãƒ¡ã‚¿æƒ…å ±ï¼‰ */
.topic-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 6px;
    margin-bottom: 4px;
    font-size: 11px;
}

/* ğŸ¯ ãŠé¡Œãƒ©ãƒ™ãƒ«éƒ¨åˆ†ï¼ˆãƒ”ãƒ«å‹ï¼‰ */
.topic-label {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 2px 8px;
    border-radius: 999px;
    background: rgba(248, 113, 113, 0.18);  /* è–„ã„èµ¤ */
    color: #b91c1c;
    font-weight: 600;
}

/* [æ™‚é–“] èª°ãŒå¼•ã„ãŸã‹ */
.topic-meta {
    font-size: 11px;
    color: #6b7280;
    white-space: nowrap;
}

/* ãŠé¡Œæœ¬æ–‡ */
.topic-body {
    margin-top: 2px;
    font-size: 14px;
    font-weight: 600;
    color: #7f1d1d;
    line-height: 1.5;
}

/* ================================
   ãƒ•ãƒƒã‚¿ãƒ¼ï¼ˆå…¥åŠ›ã¾ã‚ã‚Šï¼‰
================================ */

.footer {
    border-top: 1px solid #ddd;
    padding: 8px 12px;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    gap: 4px;
    flex-shrink: 0;      /* é«˜ã•ã¯ä¸­èº«ã«åˆã‚ã›ã‚‹ */
}

/* å…¥å®¤å‰ï¼šåå‰å…¥åŠ› */
.name-row {
    display: flex;
    gap: 4px;
    margin-bottom: 4px;
}

#nameInput {
    flex: 1;
}

/* ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å…¥åŠ›ï¼†é€ä¿¡ãƒœã‚¿ãƒ³ */
.input-row {
    display: none; /* å…¥å®¤å‰ã¯éè¡¨ç¤ºï¼ˆå…¥å®¤å¾Œã« JS ã§ flex ã«ï¼‰ */
    gap: 4px;
}

#msgInput {
    flex: 1;
}

input[type="text"] {
    padding: 4px 6px;
    font-size: 13px;
}

#sendBtn {
    background: #4b5563;
    color: white;
    border: none;
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 14px;
    cursor: pointer;
}

#sendBtn:hover {
    background: #374151;
}

#sendBtn:disabled {
    background: #9ca3af;
    cursor: default;
}

#joinBtn,
#renameBtn {
    font-size: 13px;
    padding: 4px 8px;
    cursor: pointer;
}

/* å¹ãå‡ºã—è‰²é¸æŠ ------------------------ */
.color-row {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-bottom: 4px;
    font-size: 12px;
    color: #555;
}

.color-label {
    white-space: nowrap;
}

.color-row label {
    display: flex;
    align-items: center;
    cursor: pointer;
}

/* ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³æœ¬ä½“ã¯éš ã™ */
.color-row input[type="radio"] {
    display: none;
}

/* è‰²è¦‹æœ¬ã®ä¸¸ã„ã‚¹ã‚¦ã‚©ãƒƒãƒ */
.color-swatch {
    width: 18px;
    height: 18px;
    border-radius: 999px;
    border: 1px solid #d4d4d8;
    display: inline-block;
}

/* ãƒ‘ãƒ¬ãƒƒãƒˆã®è‰²ï¼ˆHTML ã® value ã¨åˆã‚ã›ã‚‹ã ã‘ï¼‰ */
.color-pink   { background: #FFEBEE; }
.color-blue   { background: #E3F2FD; }
.color-green  { background: #E8F5E9; }
.color-orange { background: #FFF3E0; }

/* é¸æŠä¸­ã®ã‚‚ã®ã ã‘ç¸å–ã‚Š */
.color-row input[type="radio"]:checked + .color-swatch {
    outline: 2px solid #4b5563;
    outline-offset: 1px;
}

/* å®šå‹æ–‡ãƒœã‚¿ãƒ³ã®è¡Œ ---------------------- */
.template-row {
    display: none;          /* å…¥å®¤å‰ã¯éè¡¨ç¤ºï¼ˆå…¥å®¤å¾Œã« JS ã§ flex ã«ï¼‰ */
    gap: 8px;
    margin-top: 8px;
}

.template-btn {
    background: #6b7280;
    color: white;
    border: none;
    padding: 10px 14px;
    font-size: 14px;
    border-radius: 6px;
    cursor: pointer;
}

.template-btn:hover {
    background: #4b5563;
}

.template-btn:disabled {
    background: #9ca3af;
    cursor: default;
}

/* ãƒ€ã‚¤ã‚¹ãƒœã‚¿ãƒ³ï¼ˆå®šå‹æ–‡ã¨ã»ã¼åŒã˜ï¼‰ */
.dice-btn {
    padding: 8px 12px;
    border: none;
    border-radius: 6px;
    font-size: 14px;
    background-color: #6b7280;
    color: #ffffff;
    cursor: pointer;
}

.dice-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    color: #fff; 
}

/* å…¥å®¤å¾Œã ã‘è¡¨ç¤ºã™ã‚‹å°ã•ãªã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« */
.after-join-controls {
    display: none;     /* å…¥å®¤å‰ã¯éè¡¨ç¤º */
    gap: 6px;
    justify-content: space-between;
}

.after-join-controls button {
    flex: 1;
    min-width: 0;
    padding: 8px 4px;
    white-space: nowrap;
    font-size: 14px;
    background: #e5e7eb;
    color: #444;
    border: 1px solid #ccc;
    border-radius: 6px;
    cursor: pointer;
}

.after-join-controls button:hover {
    background: #d4d4d4;
}

/* è‰²å¤‰æ›´ UIï¼ˆãƒ©ã‚¸ã‚ª + æ±ºå®š/ã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼‰ */
.color-change-row {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 8px;
}

.color-change-row label {
    display: flex;
    align-items: center;
}

.color-change-btn {
    padding: 6px 10px;
    font-size: 13px;
    white-space: nowrap;
}

/* å…¥å®¤å¾Œã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å…¥åŠ›æ¬„ã‚’å°‘ã—å¼·èª¿ */
body.joined #msgInput {
    border: 1px solid #2563eb;
    box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.15);
}

#typingInfo {
    font-size: 11px;
    color: #888;
    min-height: 14px;
}

/* ================================
   ã‚¹ãƒãƒ›ç”¨ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ä¸€è¦§ãƒ¢ãƒ¼ãƒ€ãƒ«
================================ */

/* ãƒ˜ãƒƒãƒ€ãƒ¼å³ã®ãƒœã‚¿ãƒ³ï¼ˆPCã§ã¯éè¡¨ç¤ºï¼‰ */
.mobile-user-btn {
    display: none;
    font-size: 12px;
    padding: 4px 8px;
    border-radius: 999px;
    border: 1px solid #d4d4d4;
    background: #ffffff;
    color: #374151;
    cursor: pointer;
}

/* ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ä¸€è¦§ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆã‚¹ãƒãƒ›ç”¨ï¼‰ */
.mobile-user-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(15, 23, 42, 0.45);
    z-index: 100;
    align-items: center;
    justify-content: center;
}

.mobile-user-panel {
    width: 90%;
    max-width: 340px;
    max-height: 70vh;
    background: #ffffff;
    border-radius: 12px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.25);
    padding: 10px 12px;
    display: flex;
    flex-direction: column;
    box-sizing: border-box;
}

.mobile-user-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 14px;
    font-weight: 600;
}

.mobile-user-close {
    border: none;
    background: transparent;
    font-size: 16px;
    cursor: pointer;
    padding: 2px 6px;
}

.mobile-user-list {
    margin-top: 8px;
    font-size: 14px;
    line-height: 1.6;
    max-height: 56vh;
    overflow-y: auto;
}

/* ================================
   åˆ©ç”¨ä¸Šã®æ³¨æ„
================================ */

.chat-notice {
    background-color: #f7f7f7;
    border: 1px solid #dddddd;
    border-radius: 6px;
    padding: 8px 10px;
    margin: 8px 8px 4px;
    font-size: 12px;
    line-height: 1.4;
    color: #444;
}

.chat-notice-title {
    margin: 0 0 4px;
    font-weight: bold;
    font-size: 13px;
    color: #333;
}

.chat-notice-list {
    margin: 0;
    padding-left: 18px;
}

.chat-notice-list li {
    margin-bottom: 2px;
}

/* ================================
   ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆã‚¹ãƒãƒ›ï¼‰
================================ */

/* ãƒœã‚¿ãƒ³æœ¬ä½“ */
.mobile-menu-btn {
    border: none;
    background: none;
    padding: 6px;
    display: none; /* PCã§ã¯éè¡¨ç¤º */
    cursor: pointer;
}

.mobile-menu-btn span {
    display: block;
    width: 20px;
    height: 2px;
    margin: 3px 0;
    background-color: #000; /* ãƒ˜ãƒƒãƒ€ãƒ¼èƒŒæ™¯ãŒç™½å‰æã§é»’ã« */
    transition: transform 0.2s ease, opacity 0.2s ease;
}

/* ãƒ¡ãƒ‹ãƒ¥ãƒ¼æœ¬ä½“ï¼ˆé–‰ã˜ã¦ã„ã‚‹ã¨ãã¯éè¡¨ç¤ºï¼‰ */
.mobile-menu {
    display: none;
    position: absolute;
    top: 56px; /* ãƒ˜ãƒƒãƒ€ãƒ¼ã®é«˜ã•ã«åˆã‚ã›ã¦èª¿æ•´ */
    right: 0;
    left: 0;
    background: rgba(0, 0, 0, 0.9);
    padding: 8px 0;
    z-index: 1000;
}

.mobile-menu-item {
    width: 100%;
    padding: 10px 16px;
    text-align: left;
    border: none;
    background: transparent;
    color: #fff;
    font-size: 14px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.mobile-menu-item:last-child {
    border-bottom: none;
}

.mobile-menu-leave {
    color: #ff7676;
}

/* ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒé–‹ã„ã¦ã„ã‚‹ã¨ãç”¨ã®ã‚¯ãƒ©ã‚¹ */
.mobile-menu.open {
    display: block;
}

.mobile-menu-btn.open span:nth-child(1) {
    transform: translateY(5px) rotate(45deg);
}
.mobile-menu-btn.open span:nth-child(2) {
    opacity: 0;
}
.mobile-menu-btn.open span:nth-child(3) {
    transform: translateY(-5px) rotate(-45deg);
}

/* ================================
   ã‚¹ãƒãƒ›å‘ã‘ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
================================ */

@media (max-width: 768px) {

    /* ç¸¦ä¸¦ã³ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«å¤‰æ›´ï¼ˆã‚µã‚¤ãƒ‰ãƒãƒ¼ã‚’ä¸‹ã§ã¯ãªãæ¶ˆã™ï¼‰ */
    body {
        flex-direction: column;
    }

    .chat-wrapper {
        border-right: none;
        border-bottom: 1px solid #ddd;
        width: 100%;
        min-height: 0;
    }

    /* ã‚µã‚¤ãƒ‰ãƒãƒ¼ã¯éè¡¨ç¤ºï¼ˆã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã¯ãƒ¢ãƒ¼ãƒ€ãƒ«ã§è¦‹ã‚‹ï¼‰ */
    .sidebar {
        display: none;
    }

    /* ãƒ•ãƒƒã‚¿ãƒ¼ã‚’ã‚¹ãƒªãƒ ã« */
    .footer {
        padding: 6px 8px;
        gap: 4px;
    }

    /* å…¥åŠ›æ¬„ã‚’ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã« */
    .input-row input#msgInput {
        font-size: 16px;
        padding: 4px 6px;
        height: 32px;
    }

    .input-row button#sendBtn {
        padding: 4px 8px;
        font-size: 13px;
        height: 32px;
    }

    /* åå‰å…¥åŠ›è¡Œã‚‚å°‘ã—è©°ã‚ã‚‹ */
    .name-row input#nameInput {
        font-size: 16px;
        padding: 4px 6px;
        height: 32px;
    }

    .name-row button#joinBtn {
        padding: 4px 8px;
        font-size: 13px;
        height: 32px;
    }

    /* å…¥åŠ›æ¬„ãƒ»é€ä¿¡ãƒ»å…¥å®¤ãƒœã‚¿ãƒ³ã‚’çµ±ä¸€ã—ãŸé«˜ã•ã«ã™ã‚‹ */
    .input-row input#msgInput,
    .input-row button#sendBtn,
    
    .name-row input#nameInput,
    .name-row button#joinBtn {
        box-sizing: border-box;
        height: 36px;            /* â† å¥½ããªé«˜ã•ã«ï¼ˆ32ã€œ40æ¨å¥¨ï¼‰ */
        font-size: 16px;
        padding: 6px 8px;        /* â† input ã¨ button ã‚’æƒãˆã‚‹ */
    }

    /* åå‰å…¥åŠ›æ¬„ã®å…¨å¹…ã‚’ç¶­æŒ */
    #nameInput,
    #msgInput {
        width: 100%;
    }

    /* after-join-controlsï¼ˆåå‰å¤‰æ›´ï¼è‰²å¤‰æ›´ï¼é€€å®¤ï¼‰ã¯
       ã‚¹ãƒãƒ›ã§ã¯éè¡¨ç¤ºã«ã—ã¦ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¸é›†ç´„ */
    .after-join-controls {
        display: none !important;
    }

    /* é«˜ã•ã¯é€ä¿¡ãƒœã‚¿ãƒ³ã¨æƒãˆã‚‹ï¼ˆ36pxï¼‰ */
    .template-row .template-btn,
    .template-row .dice-btn {
        height: 36px;
        padding: 0 8px;
        font-size: 13px;
        border-radius: 6px;
        box-sizing: border-box;
    }

    /* ãƒœã‚¿ãƒ³é–“ã®ä½™ç™½ã¯ã™ã¹ã¦å‡ç­‰ã« */
    .template-row {
        gap: 4px;
    }

    /* å¹ãå‡ºã—è‰²è¡Œã‚‚å°‘ã—è©°ã‚ã‚‹ï¼ˆå…¥å®¤å‰ã®ã¿è¡¨ç¤ºæƒ³å®šï¼‰ */
    .color-row {
        gap: 4px;
        font-size: 11px;
    }
    .color-label {
        font-size: 11px;
    }

    /* ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’è¡¨ç¤º */
    .mobile-menu-btn {
        display: inline-flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    /* æ—§ãƒ¢ãƒã‚¤ãƒ«ç”¨ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã¯ä½¿ã‚ãªã„ */
    .mobile-user-btn {
        display: none;
    }

    /* ã‚¹ãƒãƒ›ã§ã¯ãƒãƒ£ãƒƒãƒˆãƒ­ã‚°ã®æ–‡å­—ã‚’å°‘ã—ã ã‘å°ã•ã‚ã« */
    #chatLog {
        padding: 6px 8px;
        font-size: 13px;
    }

    .message {
        max-width: 90%;
        font-size: 14px;
    }

    .message-meta {
        font-size: 11px;
    }

    .topic-message {
        padding: 6px 8px;
    }
    .topic-body {
        font-size: 13px;
    }

}
